angular.module("searchService",[]).factory("SearchService",function(){function e(e,t){return e.time&&-1==e.time.indexOf(t["时间"].trim())?!1:e.keywords&&-1==t["课程名称"].trim().indexOf(e.keywords.trim())?!1:e.courseID&&-1==t["选课序号"].trim().indexOf(e.courseID.trim())?!1:!0}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};var t={search:function(t){var r=[];if(t.category.length>0)t.category.forEach(function(a){COURSE_DATA[a].forEach(function(a){e(t,a)&&r.push(a)})});else for(var a in COURSE_DATA)COURSE_DATA[a].forEach(function(a){e(t,a)&&r.push(a)});return r},timeParser:function(e){var t,r=e.trim();switch(r.split(" ")[0]){case"一":t=1;break;case"二":t=2;break;case"三":t=3;break;case"四":t=4;break;case"五":t=5;break;case"六":t=6}var a=parseInt(r.split(" ")[1].split("-")[1])-parseInt(r.split(" ")[1].split("-")[0])+1,o=parseInt(r.split(" ")[1].split("-")[0]);return{weekday:t,length:a,start:o-1}}};return t});var starkAPP=angular.module("starkAPP",["ngRoute","ngAnimate","routeStyles","searchService"]).config(["$compileProvider","$routeProvider","$locationProvider",function(e,t,r){t.when("/main/",{templateUrl:"/html/main.html",css:"/build/css/main.css"}).otherwise({redirectTo:"/main/"})}]);angular.module("starkAPP").controller("resultController",["$scope","SearchService",function(e,t){}]),angular.module("starkAPP").controller("sidebarController",["$scope","SearchService","$timeout","$location",function(e,t,r,a){"/main/"==a.path()&&(e.mainIsActive=!0)}]),angular.module("starkAPP").controller("mainController",["$scope","SearchService","$timeout",function(e,t,r){var a={category:[],keywords:"",courseID:"HIST"},o=t.search(a),i=[];e.tableView=[[],[],[],[],[],[]],i.push(o[1]),i.push(o[5]),i.push(o[8]),console.log(i),i.forEach(function(r){var a=t.timeParser(r["时间"]);console.log(a),2==a.length&&(e.tableView[a.weekday][a.start]={text:r["选课序号"]+"\n"+r["课程名称"],type:"double1"},e.tableView[a.weekday][a.start+1]={text:r["教室"]+" "+r["教师"],type:"double2"}),3==a.length&&(e.tableView[a.weekday][a.start]={text:r["选课序号"],type:"triple1"},e.tableView[a.weekday][a.start+1]={text:r["课程名称"],type:"triple2"},e.tableView[a.weekday][a.start+2]={text:r["教室"]+" "+r["教师"],type:"triple3"}),4==a.length&&(e.tableView[a.weekday][a.start]={text:r["选课序号"],type:"fourfold1"},e.tableView[a.weekday][a.start+1]={text:r["课程名称"],type:"fourfold2"},e.tableView[a.weekday][a.start+2]={text:r["教室"],type:"fourfold3"},e.tableView[a.weekday][a.start+3]={text:r["教师"],type:"fourfold4"})})}]);